<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">


<html>
  <head>
    <title>UnboundID Server SDK</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../unboundid.css" type="text/css">
    <link rel="shortcut icon" href="../images/favicon.ico">
  </head>

  <body>
    <div id="wrapper">
      <div id="headercontainer">
        <a href="http://www.unboundid.com/" title="UnboundID Server SDK" id="logo">
          <img src="../images/+___.gif" width="274" height="99" alt="UnboundID" style="float: left;">
        </a>
        <div id="headertitle">
          <br>
          <h1>UnboundID Server SDK</h1>
        </div>
      </div>

      <div id="content">
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
          <tr valign="top">
            <td style="padding: 10px 30px 20px 40px;">

              <table border="0" width="100%">
                <tr>
                  <td align="right" valign="middle">
                    <a href="../index.html" style="font-size: 85%;">UnboundID Server SDK Documentation</a>
                    <br>
                    <a href="index.html" style="font-size: 85%;">Getting Started with the UnboundID Server SDK</a>
                  </td>
                </tr>
              </table>

              <h2>Working with Threads</h2>

              <p>
                In some cases, it may be desirable for an extension to create one or more threads
                to allow it to perform some processing in the background, or to perform multiple
                sets of processing concurrently.  If your extension may need to create one or more
                threads for some reason, then there are a number of things to keep in mind.
              </p>

              <p>
                In general, extensions should not directly create threads (e.g., by creating
                objects which extend <code>java.lang.Thread</code>, or by calling
                <code>new Thread(Runnable)</code>).  Instead, the code to be invoked in that
                thread should be in a class that implements the <code>ServerThread</code>
                interface, and you should actually create the thread using the
                <code>ServerContext.createThread</code> method.  This provides a number of
                benefits over other methods of creating threads, including:
              </p>

              <ul>
                <li>
                  It requires that a name be provided for the thread when it is created.  If a
                  thread has a well-chosen name, then it can be very useful in helping to
                  understand the purpose of that thread when debugging problems.
                  <br><br>
                </li>

                <li>
                  Whenever a server thread is created, a stack trace is captured and stored
                  in the thread.  Having information about the context in which a thread was
                  created may be very useful for debugging certain kinds of problems.
                  <br><br>
                </li>

                <li>
                  Server threads will have additional processing performed whenever they exit
                  (e.g., to ensure that they are not still holding any locks that have not been
                  properly released and could cause significant problems in the server).
                  <br><br>
                </li>

                <li>
                  Server threads are treated differently from non-server threads if they are
                  still running when the server is in the course of shutting down.  In the event
                  that the shutdown process is taking too long, server threads more readily
                  interrupted that non-server threads to speed the shutdown process.
                  <br><br>
                </li>
              </ul>

              <p>
                If your extension may create one or more threads, then it also needs to ensure
                that those threads are properly shut down when the extension is disabled.  In most
                cases, the <code>finalize</code><i>{ExtensionType}</i> method should be careful to
                clean up any threads that were created by that extension.  However, in some cases
                it may be desirable to have a thread or set of threads shared across multiple
                instances of an extension.  In such cases, you will likely not want to destroy
                those threads whenever any one of those instances are disabled if there may still
                be other instances of the extension that are active.  Rather, in this case you
                will either want to use some kind of reference counter to only shut down the
                threads when taking the last enabled instance of your extension out of service,
                or you may simply wish to use something like a <code>ServerShutdownListener</code>
                to ensure that the threads are notified when the server begins its shutdown
                process.
              </p>

            </td>
          </tr>
        </table>
      </div>

      <div id="footer">
        Copyright &copy; 2010-2011 &ndash; UnboundID Corp. &ndash; All rights reserved.
      </div>
    </div>
  </body>
</html>

