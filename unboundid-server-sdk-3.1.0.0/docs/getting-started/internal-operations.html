<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">


<html>
  <head>
    <title>UnboundID Server SDK</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../unboundid.css" type="text/css">
    <link rel="shortcut icon" href="../images/favicon.ico">
  </head>

  <body>
    <div id="wrapper">
      <div id="headercontainer">
        <a href="http://www.unboundid.com/" title="UnboundID Server SDK" id="logo">
          <img src="../images/+___.gif" width="274" height="99" alt="UnboundID" style="float: left;">
        </a>
        <div id="headertitle">
          <br>
          <h1>UnboundID Server SDK</h1>
        </div>
      </div>

      <div id="content">
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
          <tr valign="top">
            <td style="padding: 10px 30px 20px 40px;">

              <table border="0" width="100%">
                <tr>
                  <td align="right" valign="middle">
                    <a href="../index.html" style="font-size: 85%;">UnboundID Server SDK Documentation</a>
                    <br>
                    <a href="index.html" style="font-size: 85%;">Getting Started with the UnboundID Server SDK</a>
                  </td>
                </tr>
              </table>

              <h2>Processing Internal Operations</h2>

              <p>
                When writing extensions to operate within the server, it is often necessary to be
                able to process operations in the server in order to perform queries and/or make
                updates.  Although you could use LDAP to establish connections and process
                operations like any other client, this is both problematic and inefficient.  A
                much better approach to the problem is to perform internal operations.  Using
                internal operations within extensions offers a number of benefits over invoking
                external operations, including:
              </p>

              <ul>
                <li>
                  There is no need to know the address of the server, what port it is using,
                  how to authenticate, whether to use a secure connection, etc.  You can easily
                  obtain an internal connection authenticated as either an internal root user or
                  as any specified user.
                  <br><br>
                </li>

                <li>
                  Internal operations are more efficient because there is no network transfer or
                  protocol handling, and there is no go through the work queue or have the
                  request handed off between threads.
                  <br><br>
                </li>

                <li>
                  Internal operations may be used to perform updates that are not allowed for
                  external clients.  For example, internal operations may be used to write to
                  attributes marked "NO-USER-MODIFICATION" (although great care should be taken
                  when doing so to ensure that you will not interfere with the normal operation of
                  the server).
                  <br><br>
                </li>
              </ul>

              <p>
                Processing internal operations in the UnboundID Server SDK is basically the same
                as processing external operations using the UnboundID LDAP SDK for Java.  Instead
                of creating an external LDAP connection, it is necessary to obtain an
                <code>InternalConnection</code> object.  The <code>InternalConnection</code> class
                provides most of the same methods as <code>LDAPException</code> (and implements
                the same <code>LDAPInterface</code> interface), so if you are familiar with using
                the LDAP SDK then you should be comfortable using this mechanism for processing
                internal operations in the server.
              </p>

              <p>
                There are a few ways to obtain an <code>InternalConnection</code> object.  If your
                extension is invoked during the course of processing an operation (e.g., as a
                plugin), then you can use the
                <code>OperationContext.getInternalUserConnection</code> method in order to obtain
                an internal connection authenticated as the user that requested the operation, or
                you can use <code>OperationContext.getInternalRootConnection</code> method to
                obtain a connection authenticated as an internal root user that will be exempt
                from access control restrictions.  In all other cases, you can use the
                <code>ServerContext.getInternalRootConnection</code> method to obtain an internal
                root connection, or the <code>ServerContext.getInternalConnection</code> method to
                obtain an internal connection authenticated as any specified user.
              </p>

              <p>
                Note that there is no need to close an internal connection when it is no longer
                needed because it does not consume any resources within the server.  You may
                simply stop using an internal connection and allow it to be garbage collected when
                it is no longer needed.
              </p>

            </td>
          </tr>
        </table>
      </div>

      <div id="footer">
        Copyright &copy; 2010-2011 &ndash; UnboundID Corp. &ndash; All rights reserved.
      </div>
    </div>
  </body>
</html>

