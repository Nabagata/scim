<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">


<html>
  <head>
    <title>UnboundID Server SDK</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../unboundid.css" type="text/css">
    <link rel="shortcut icon" href="../images/favicon.ico">
  </head>

  <body>
    <div id="wrapper">
      <div id="headercontainer">
        <a href="http://www.unboundid.com/" title="UnboundID Server SDK" id="logo">
          <img src="../images/+___.gif" width="274" height="99" alt="UnboundID" style="float: left;">
        </a>
        <div id="headertitle">
          <br>
          <h1>UnboundID Server SDK</h1>
        </div>
      </div>

      <div id="content">
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
          <tr valign="top">
            <td style="padding: 10px 30px 20px 40px;">

              <table border="0" width="100%">
                <tr>
                  <td align="right" valign="middle">
                    <a href="../index.html" style="font-size: 85%;">UnboundID Server SDK Documentation</a>
                    <br>
                    <a href="index.html" style="font-size: 85%;">Getting Started with the UnboundID Server SDK</a>
                  </td>
                </tr>
              </table>

              <h2>Building and Deploying Scripted Extensions</h2>

              <p>
                The UnboundID Server SDK provides support for writing and deploying certain kinds
                of extensions using a dynamic scripting language as an alternative to compiled
                Java code.  The primary benefit that this offers is that it is possible to deploy
                extensions without the need to compile or package them into jar files.  It is also
                possible to deploy new or updated extensions without the need to restart the
                server (as long as those extensions do not require adding or updating any
                third-party libraries provided in jar files).  Using a dynamic scripting language
                rather than compiled Java code may incur a penalty in performance, but in many
                cases the actual impact to server performance is minimal.
              </p>

              <p>
                At the present time, only the <a href="http://groovy.codehaus.org/">Groovy</a>
                language may be used for scripted extensions.  Groovy provides the benefit of
                nearly perfect Java compatibility, although it does offer additional features
                and conveniences that Java by itself does not provide.  When writing scripted
                extensions with Groovy, you may choose to either stick to only Java-compatible
                syntax, or use the full capabilities offered by Groovy.
              </p>

              <p>
                You can deploy Groovy-scripted extensions as either individual script files or
                bundled in jar files (in which the jar files merely contain the Groovy scripts in
                the appropriate directory hierarchy).  To deploy an extension using individual
                script files, the process is as follows:
              </p>

              <ol>
                <li>
                  If the extension depends on any third-party libraries (other than the UnboundID
                  Server SDK or UnboundID LDAP SDK for Java), you must first stop the server,
                  place the jar files for those libraries in the <tt>lib/extensions</tt> directory
                  below the server root, and re-start the server.  If the extension does not have
                  any requirements on any third-party libraries, then this step is not required.
                  <br><br>
                </li>

                <li>
                  Create an appropriate directory hierarchy for any package(s) used by the script
                  files below the <tt>lib/groovy-scripted-extensions</tt> directory and copy the
                  script files into those directories as appropriate.
                  <br><br>
                </li>

                <li>
                  Use the <tt>dsconfig</tt> tool or the web-based administration console to create
                  configuration objects for your extension as needed.  Use the "groovy-scripted"
                  type for the extension, and supply the fully-qualified name of the Groovy class
                  providing the logic for the extension in the <tt>script-class</tt> property.  If
                  your extension requires any arguments, then specify them as values to the
                  <tt>script-argument</tt> property.  Each argument should be provided as a separate
                  property value in the form "name=value".
                  <br><br>
                </li>
              </ol>

              <p>
                If your scripted extensions are to be deployed in a jar file, then the process is
                the same, except that the jar file containing the Groovy scripts should be placed
                directly in the <tt>lib/groovy-scripted-extensions</tt> directory without the
                need to create any subordinate directory structure.  Note, however, that if you
                use jar files (or a mix of jar files and individual scripts), you must be careful
                to ensure that you do not install conflicting versions of the same scripts.
              </p>

              <p>
                In order to deploy an updated version of an existing scripted extension, the
                process is as follows:
              </p>

              <ol>
                <li>
                  Use <tt>dsconfig</tt> or the administration console to disable the existing
                  configuration objects for the scripted extension types to be updated.
                  <br><br>
                </li>

                <li>
                  If the extension depends on any third-party libraries and the new version of the
                  extension requires new versions of those libraries, then you must stop the
                  server, delete the files for the old versions of those libraries from the
                  <tt>lib/extensions</tt> directory, copy the new versions of those libraries into
                  that directory, and start the server.  If your extension does not depend on any
                  third-party libraries, or if you do not need to update the versions of the
                  libraries that it does use, then this step is not required.
                  <br><br>
                </li>

                <li>
                  Remove the files for the existing version of the extensions (whether the
                  individual script files or jar files containing the scripts) and deploy the
                  updated versions of those files.
                  <br><br>
                </li>

                <li>
                  Use <tt>dsconfig</tt> or the administration console to re-enable the
                  configuration objects for the updated extensions.  If the updated
                  version requires any argument changes, then you can make those argument
                  changes in the configuration objects at this time.
                  <br><br>
                </li>
              </ol>

              <p>
                A few extensions cannot be disabled.  The above procedure could be followed
                by deleting and re-adding the extension in place of disabling it and re-enabling
                it.  Alternatively, the offline mode of dsconfig can be used as follows:
              </p>

              <ol>
                <li>
                  Stop the server.
                  <br><br>
                </li>

                <li>
                  Replace the extension script file(s) or jar file(s) as detailed above.
                  <br><br>
                </li>

                <li>
                  Using dsconfig in offline mode, make any necessary configuration changes
                  (e.g., by updating the set of extension arguments as necessary).  Do this with
                  care as it will bypass validation of the arguments by the extension.
                  <br><br>
                </li>

                <li>
                  Start the server and look for warnings related to the extension's new arguments.
                  <br><br>
                </li>
              </ol>

            </td>
          </tr>
        </table>
      </div>

      <div id="footer">
        Copyright &copy; 2010-2011 &ndash; UnboundID Corp. &ndash; All rights reserved.
      </div>
    </div>
  </body>
</html>

