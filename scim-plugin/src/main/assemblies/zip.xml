<!--
  ~ Copyright 2011 UnboundID Corp.
  ~ All Rights Reserved.
  -->

<!-- 
  NOTE: This assembly descriptor should be removed as soon as ETAH is updated to make
        use of the manage-extension tool for installing the extension. From then on,
        we can use the bundle.xml descriptor.
  -->

<assembly
        xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.1"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.1 http://maven.apache.org/xsd/assembly-1.1.1.xsd">
    <formats>
        <format>zip</format>
    </formats>
    <fileSets>
        <fileSet>
            <outputDirectory>.</outputDirectory>
            <directory>${project.build.directory}</directory>
            <includes>
                <include>3RD_PARTY_LICENSES.txt</include>
            </includes>
        </fileSet>
        <!-- TODO: we need to move the core server's GenerateLicenseText build tool
                   over to the Common module, then update SCIM to depend on Common
                   and use this tool to get the official UnboundID License text.
        <fileSet>
            <outputDirectory>.</outputDirectory>
            <directory>${project.build.directory}</directory>
            <includes>
                <include>CORE-UBID-LICENSE.txt</include>
            </includes>
        </fileSet>
        -->
        <fileSet>
            <outputDirectory>config/scim</outputDirectory>
            <directory>${project.basedir}/../scim-ri/src/main/assemblies/server/config</directory>
        </fileSet>
        <fileSet>
            <outputDirectory>config/scim</outputDirectory>
            <directory>${project.basedir}/../scim-ldap/src/main/resources/com/unboundid/scim/ldap</directory>
            <includes>
                <include>*.xsd</include>
            </includes>
        </fileSet>
    </fileSets>
    <dependencySets>
        <dependencySet>
            <outputDirectory>lib/extensions</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
            <excludes>
              <!-- Make sure we don't include any jars that the server already has. -->
              <exclude>com.unboundid.product:ldapsdk</exclude>
              <exclude>com.unboundid.product.ds:server-sdk</exclude>
              <exclude>javax.activation:activation</exclude>
              <exclude>org.eclipse.jetty:jetty-*</exclude>
              <exclude>org.mortbay.jetty:servlet-api</exclude>
              <exclude>org.json:json</exclude>
            </excludes>
        </dependencySet>
    </dependencySets>
</assembly>
