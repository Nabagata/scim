<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">


<html>
  <head>
    <title>UnboundID Server SDK</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="../unboundid.css" type="text/css">
    <link rel="shortcut icon" href="../images/favicon.ico">
  </head>

  <body>
    <div id="wrapper">
      <div id="headercontainer">
        <a href="http://www.unboundid.com/" title="UnboundID Server SDK" id="logo">
          <img src="../images/+___.gif" width="274" height="99" alt="UnboundID" style="float: left;">
        </a>
        <div id="headertitle">
          <br>
          <h1>UnboundID Server SDK</h1>
        </div>
      </div>

      <div id="content">
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
          <tr valign="top">
            <td style="padding: 10px 30px 20px 40px;">

              <table border="0" width="100%">
                <tr>
                  <td align="right" valign="middle">
                    <a href="../index.html" style="font-size: 85%;">UnboundID Server SDK Documentation</a>
                    <br>
                    <a href="index.html" style="font-size: 85%;">Getting Started with the UnboundID Server SDK</a>
                  </td>
                </tr>
              </table>

              <h2>Performing Processing at Startup and Shutdown</h2>

              <p>
                The UnboundID Server SDK provides a number of mechanisms for performing custom
                processing when the server is starting up and/or shutting down.  This section
                describes the differences between those mechanisms and the contexts in which they
                should be used.
              </p>


              <h3>Extension Initialization and Finalization</h3>

              <p>
                Whenever an extension is prepared for use in the server, then a method is invoked
                in that extension to allow it to perform any appropriate initialization (e.g.,
                parsing arguments provided to the extension).  If an extension is already defined
                and enabled in the server configuration, then this initialization will occur
                during server startup.  Otherwise, it will be invoked whenever a new instance of
                the extension is added to the server configuration (if that extension is enabled
                at the time it is added), or when an existing disabled extension is updated so
                that it is enabled.  If you need to perform processing whenever an extension is
                initialized, regardless of whether that initialization is performed at startup or
                after the server is already running, then the extension's
                <code>initialize</code><i>{ExtensionType}</i> method should be used to accomplish
                that.
              </p>

              <p>
                Similarly, each type of extension also provides a method that will be invoked
                whenever that extension will be taken out of service (e.g., to close any files or
                free up any other resources it might have been using).  If an extension is
                disabled while the server is still running, then this finalization will occur at
                that time.  Otherwise, it will be invoked as part of the server shutdown
                processing.  If you need to perform processing whenever an extension is taken out
                of service, whether at shutdown or while the server is still running, then the
                extension's <code>finalize</code><i>{ExtensionType}</i> method should be used to
                do that.
              </p>


              <h3>Startup and Shutdown Plugins</h3>

              <p>
                If you want to have a certain set of processing performed only at the time that
                the server is started rather than any time that an extension is initialized, then
                you should use a startup plugin (i.e., create a Java-based or scripted plugin that
                implements the <code>doStartup</code> method).
              </p>

              <p>
                Note that if you include code in the <code>initializePlugin</code> method, then it
                will be invoked whenever the plugin is initialized, regardless of whether that
                occurs at startup or after the server is already running.  If it is at startup,
                then the <code>initializePlugin</code> method will be invoked before the
                <code>doStartup</code> method.  If the plugin is added to the sever after it has
                already been started, then the <code>initializePlugin</code> method will be
                invoked at that time, but the <code>doStartup</code> method will not be invoked
                until the next time the server is started.
              </p>

              <p>
                By default, startup plugins will be invoked very late in the startup process,
                after nearly all other server components have been initialized but before the
                server has begun accepting client connections.  This helps ensure that any other
                components the plugin might need to reference will be available for use.  However,
                if it is necessary for that to occur earlier in the startup process, then that can
                be accomplished by implementing the <code>getStartupDependencies</code> method and
                returning a set containing the minimal set of dependencies that must be satisfied
                before the processing should be invoked.
              </p>

              <p>
                Similarly, plugins can implement a <code>doShutdown</code> method, which will be
                invoked only when the server is shutting down.  This processing will be invoked
                very early in the shutdown process after the server has stopped accepting new
                connections and closed all existing connections, but before shutting down most
                other components.
              </p>

              <p>
                If a plugin implements both the <code>doShutdown</code> and
                <code>finalizePlugin</code> methods, then both methods will be invoked at shutdown
                if the plugin is enabled, with the <code>doShutdown</code> method called before
                the <code>finalizePlugin</code> method.  However, if the plugin is disabled while
                the server is still running, then the <code>finalizePlugin</code> method will be
                invoked at that time, and the <code>doShutdown</code> method will not be invoked
                when the server is shut down.
              </p>


              <h3>Server Shutdown Listeners</h3>

              <p>
                If you want to have a non-plugin extension perform some kind of processing only
                when the server is shutting down, then you can have that extension implement the
                <code>ServerShutdownListener</code> interface and use the
                <code>ServerContext.registerShutdownListener</code> method to register that
                listener to be invoked whenever the server is shut down.
              </p>

              <p>
                Note that if an extension is registered as a shutdown listener, then both the
                <code>processServerShutdown</code> method and the extension's
                <code>finalize</code><i>{ExtensionType}</i> method will be invoked (in that order)
                at server shutdown.  Also note that even if an extension is disabled, if it has
                previously been registered as a shutdown listener, then its
                <code>processServerShutdown</code> method will be invoked unless it is also
                deregistered as a shutdown listener in its
                <code>finalize</code><i>{ExtensionType}</i> method.
              </p>

            </td>
          </tr>
        </table>
      </div>

      <div id="footer">
        Copyright &copy; 2010-2011 &ndash; UnboundID Corp. &ndash; All rights reserved.
      </div>
    </div>
  </body>
</html>

